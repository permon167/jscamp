<!DOCTYPE html>
<html lang="en">
  <head>
    <title>React.js</title>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Listado con empleos y filtros para encontrar el trabajo de tus sueños."
    />
    <link rel="stylesheet" href="styles.css" />
    <!-- type=module Forma de cargar el js esperando a que se parsee el html sin problema -->
    <script type="module">
      import React from "https://esm.sh/react?dev";
      import ReactDOM from "https://esm.sh/react-dom/client?dev";

      window.React = React;
      window.ReactDOM = ReactDOM;
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      //Componente de React
      function Jobcard({ data, titulo, empresa, ubicacion, descripcion }) {
        const [isApplied, setIsApplied] = React.useState(false);

        function handleClick() {
          setIsApplied(!isApplied);
        }

        const text = isApplied ? "Aplicado" : "Aplicar";

        return (
          <article
            className="job-listing-card"
            data-modalidad={data?.modalidad}
            data-tecnologia={data?.tecnologia}
            data-nivel={data?.nivel}
          >
            <div>
              <h3>{titulo}</h3>
              <small>
                {empresa} - {ubicacion}
              </small>
              <p>{descripcion}</p>
            </div>

            <button
              disabled={isApplied === true}
              className={`button-apply-job ${isApplied ? "is-applied" : ""}`}
              onClick={handleClick}
            >
              {text}
            </button>
          </article>
        );
      }

      function App() {
        return (
          <div className="jobs-listings">
            <Jobcard
              titulo="Desarrollador React.js"
              empresa="Tech Solutions"
              ubicacion="Remoto"
              descripcion="Únete a nuestro equipo como desarrollador 
              React.js y trabaja en proyectos innovadores."
              data={{
                modalidad: "Remoto",
                tecnologia: "React",
                nivel: "Junior",
              }}
            />
          </div>
        );
      }

      const rootElement = document.querySelector("#root");
      const root = ReactDOM.createRoot(rootElement);
      root.render(<App />);
    </script>
  </head>

  <body>
    <header>
      <h1>DevJobs</h1>

      <nav>
        <a href="index.html">Inicio</a>
        <!-- <a href="">Empleos</a> -->
      </nav>
      <!-- Aqui importo el avatar de X usando la pagina de unavatar.io y el Web component -->
      <div>
        <devjobs-avatar
          service="x"
          username="perezmontoya16"
          size="38"
        ></devjobs-avatar>
      </div>
    </header>

    <main>
      <section class="jobs-search">
        <h1>React.js</h1>
      </section>
      <section>
        <h2>Empleos disponibles</h2>
        <div id="root"></div>
      </section>
    </main>

    <footer>
      <small>&copy; 2025 DevJobs. Todos los derechos reservados.</small>
    </footer>
  </body>
</html>
